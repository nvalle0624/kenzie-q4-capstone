{% extends request.user.is_staff|yesno:'admin_navbar.html,client_navbar.html' %}
{% block content %}
{% if request.user.is_staff %}
<button><a href='/session_edit/{{session.id}}'>Edit Session</a></button>
{% else %}
<button><a href='/session_add_dog/{{session.id}}'>Book this session</a></button>
{% endif %}




<div class="card-body">
    <h5 class="card-title">{{trainer.full_name}}</h5>
      
        <h4 class="card-title">Activity:</b> {{session.activity_name}}</h4>
        <p class="card-text"><b>Date:</b> {{session.date}}</p>
        <p class="card-text"><b>Start:</b> {{session.start_time}}</p>
        <p class="card-text"><b>End:</b> {{session.end_time}}</p>
        <p class="card-text"></p><b>Description:</b> {{session.description}}</p>
</div>




<div class="card-body" style="float: right;">
<b>Trainers</b>
{% for trainer in session.trainer.all  %}
<li>
  <a href='/trainer_detail/{{trainer.id}}'>{{trainer.full_name}}</a>
</li>
{% endfor %}
<br>
<br>
<b>Dogs Booked:</b>
<br>
{% for dog in dogs_assigned %}
<li>
  <a href='/dog_profile/{{dog.id}}'>{{dog.name}}</a>
</li>
<br>
{% endfor %}
<br>
</div>



<div class="card-body" style="float: left;">
<p>
  <b>Availability:</b>
  {% if session.full %}
  Sorry, this session is full!
  {% else %}
  There are still {{open_slots}} slots available for this session!
  {% endif %}
</p>
<br>

<p>
  <b>Session Status:</b>
  {% if session.completed %}
This session has ended
{% else %}
This session is pending completion
{% endif %}
</p>

<br>
<h3>Notes:</h3>
{{session.notes}}


{% if session.complete %}
<p>Session times:</p>
start:{{session.start}}
end:{{session.end}}
{% endif %}

{% if request.user.is_staff %}
<h3>Start/End</h3>
<form method='post' action="">
  {% csrf_token %}
  {{form.as_p}}
  {% if not session.start_check and not session.completed %}
  <input type='submit' value='Start'>
  {% elif session.start_check and not session.completed %}
  <input type='submit' value='End'>
  {% elif session.completed and not session.report_submitted %}
  <input type='submit' value='Submit Reports'>
  {% endif %}
</form>
</div>
{% endif %}
{% endblock %}